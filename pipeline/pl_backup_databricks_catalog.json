{
	"name": "pl_backup_databricks_catalog",
	"properties": {
		"description": "This pipeline should be used to run a backup of the data-bricks catalog.",
		"activities": [
			{
				"name": "catalog_backup",
				"description": "Run the backup python script to backup a data bricks catalog",
				"type": "DatabricksNotebook",
				"dependsOn": [],
				"policy": {
					"timeout": "0.12:00:00",
					"retry": 0,
					"retryIntervalInSeconds": 30,
					"secureOutput": true,
					"secureInput": true
				},
				"userProperties": [],
				"typeProperties": {
					"notebookPath": {
						"value": "@pipeline().parameters.notebook_path",
						"type": "Expression"
					},
					"baseParameters": {
						"catalog_name": {
							"value": "@pipeline().parameters.catalog_name",
							"type": "Expression"
						},
						"backup_to_location_path": {
							"value": "@pipeline().parameters.external_backup_location",
							"type": "Expression"
						}
					}
				},
				"linkedServiceName": {
					"referenceName": "ls_databricks_interactive_cluster_azure_shir",
					"type": "LinkedServiceReference",
					"parameters": {
						"dbx_workspace_url": {
							"value": "@pipeline().parameters.dbx_workspace_url",
							"type": "Expression"
						},
						"dbx_workspace_resource_id": {
							"value": "@pipeline().parameters.dbx_workspace_resource_id",
							"type": "Expression"
						},
						"dbx_cluster_id": {
							"value": "@pipeline().parameters.dbx_cluster_id",
							"type": "Expression"
						}
					}
				}
			}
		],
		"parameters": {
			"dbx_workspace_url": {
				"type": "string",
				"defaultValue": "https://adb-1053042427915632.12.azuredatabricks.net"
			},
			"dbx_workspace_resource_id": {
				"type": "string",
				"defaultValue": "/subscriptions/d12cd7ca-ec96-4566-8890-89f3194d1169/resourceGroups/rg-transformation-cdp-preprd-we-ojsu/providers/Microsoft.Databricks/workspaces/dbw-transformation-cdp-preprd"
			},
			"dbx_cluster_id": {
				"type": "string",
				"defaultValue": "1220-112536-2dhkacra"
			},
			"catalog_name": {
				"type": "string",
				"defaultValue": "cdp_preprd_transformation"
			},
			"external_backup_location": {
				"type": "string",
				"defaultValue": "abfss://daily@stbackupcdppreprdweojsu.dfs.core.windows.net"
			},
			"notebook_path": {
				"type": "string",
				"defaultValue": "/Workspace/Repos/ADF_databricks_Hermes_team/adf-cdp-pipelines/Databricks_notebooks/backup_databricks_table_notebook"
			}
		},
		"folder": {
			"name": "cloud"
		},
		"annotations": []
	}
}